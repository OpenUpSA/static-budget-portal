!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(){}function o(e,t){var n,o,a,i,s=L;for(i=arguments.length;i-- >2;)I.push(arguments[i]);for(t&&null!=t.children&&(I.length||I.push(t.children),delete t.children);I.length;)if((o=I.pop())&&void 0!==o.pop)for(i=o.length;i--;)I.push(o[i]);else"boolean"==typeof o&&(o=null),(a="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(a=!1)),a&&n?s[s.length-1]+=o:s===L?s=[o]:s.push(o),n=a;var u=new r;return u.nodeName=e,u.children=s,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==R.vnode&&R.vnode(u),u}function a(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){return o(e.nodeName,a(a({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function s(e){!e._dirty&&(e._dirty=!0)&&1==U.push(e)&&(R.debounceRendering||D)(u)}function u(){var e,t=U;for(U=[];e=t.pop();)e._dirty&&j(e)}function c(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):n||e._componentConstructor===t.nodeName}function l(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function f(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function p(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"===(void 0===r?"undefined":A(r))){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===F.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,m,i):e.removeEventListener(t,m,i),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)v(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var s=o&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function v(e,t,n){try{e[t]=n}catch(e){}}function m(e){return this._listeners[e.type](R.event&&R.event(e)||e)}function y(){for(var e;e=B.pop();)R.afterMount&&R.afterMount(e),e.componentDidMount&&e.componentDidMount()}function g(e,t,n,r,o,a){Y++||(H=null!=o&&void 0!==o.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var i=_(e,t,n,r,a);return o&&i.parentNode!==o&&o.appendChild(i),--Y||(q=!1,a||y()),i}function _(e,t,n,r,o){var a=e,i=H;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),S(e,!0))),a.__preactattr_=!0,a;var s=t.nodeName;if("function"==typeof s)return M(e,t,n,r);if(H="svg"===s||"foreignObject"!==s&&H,s=String(s),(!e||!l(e,s))&&(a=p(s,H),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),S(e,!0)}var u=a.firstChild,c=a.__preactattr_,f=t.children;if(null==c){c=a.__preactattr_={};for(var d=a.attributes,h=d.length;h--;)c[d[h].name]=d[h].value}return!q&&f&&1===f.length&&"string"==typeof f[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||null!=u)&&b(a,f,n,r,q||null!=c.dangerouslySetInnerHTML),k(a,t.attributes,c),H=i,a}function b(e,t,n,r,o){var a,i,s,u,l,f=e.childNodes,p=[],h={},v=0,m=0,y=f.length,g=0,b=t?t.length:0;if(0!==y)for(var w=0;w<y;w++){var k=f[w],O=k.__preactattr_,x=b&&O?k._component?k._component.__key:O.key:null;null!=x?(v++,h[x]=k):(O||(void 0!==k.splitText?!o||k.nodeValue.trim():o))&&(p[g++]=k)}if(0!==b)for(var w=0;w<b;w++){u=t[w],l=null;var x=u.key;if(null!=x)v&&void 0!==h[x]&&(l=h[x],h[x]=void 0,v--);else if(!l&&m<g)for(a=m;a<g;a++)if(void 0!==p[a]&&c(i=p[a],u,o)){l=i,p[a]=void 0,a===g-1&&g--,a===m&&m++;break}l=_(l,u,n,r),s=f[w],l&&l!==e&&l!==s&&(null==s?e.appendChild(l):l===s.nextSibling?d(s):e.insertBefore(l,s))}if(v)for(var w in h)void 0!==h[w]&&S(h[w],!1);for(;m<=g;)void 0!==(l=p[g--])&&S(l,!1)}function S(e,t){var n=e._component;n?P(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||d(e),w(e))}function w(e){for(e=e.lastChild;e;){var t=e.previousSibling;S(e,!0),e=t}}function k(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||h(e,r,n[r],n[r]=void 0,H);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||h(e,r,n[r],n[r]=t[r],H)}function O(e){var t=e.constructor.name;(z[t]||(z[t]=[])).push(e)}function x(e,t,n){var r,o=z[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),E.call(r,t,n)):(r=new E(t,n),r.constructor=e,r.render=C),o)for(var a=o.length;a--;)if(o[a].constructor===e){r.nextBase=o[a].nextBase,o.splice(a,1);break}return r}function C(e,t,n){return this.constructor(e,n)}function N(e,t,n,r,o){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===R.syncComponentUpdates&&e.base?s(e):j(e,1,o)),e.__ref&&e.__ref(e))}function j(e,t,n,r){if(!e._disable){var o,i,s,u=e.props,c=e.state,l=e.context,p=e.prevProps||u,d=e.prevState||c,h=e.prevContext||l,v=e.base,m=e.nextBase,_=v||m,b=e._component,w=!1;if(v&&(e.props=p,e.state=d,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,l)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,l),e.props=u,e.state=c,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){o=e.render(u,c,l),e.getChildContext&&(l=a(a({},l),e.getChildContext()));var k,O,C=o&&o.nodeName;if("function"==typeof C){var M=f(o);i=b,i&&i.constructor===C&&M.key==i.__key?N(i,M,1,l,!1):(k=i,e._component=i=x(C,M,l),i.nextBase=i.nextBase||m,i._parentComponent=e,N(i,M,0,l,!1),j(i,1,n,!0)),O=i.base}else s=_,k=b,k&&(s=e._component=null),(_||1===t)&&(s&&(s._component=null),O=g(s,o,l,n||!v,_&&_.parentNode,!0));if(_&&O!==_&&i!==b){var E=_.parentNode;E&&O!==E&&(E.replaceChild(O,_),k||(_._component=null,S(_,!1)))}if(k&&P(k),e.base=O,O&&!r){for(var T=e,A=e;A=A._parentComponent;)(T=A).base=O;O._component=T,O._componentConstructor=T.constructor}}if(!v||n?B.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(p,d,h),R.afterUpdate&&R.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);Y||r||y()}}function M(e,t,n,r){for(var o=e&&e._component,a=o,i=e,s=o&&e._componentConstructor===t.nodeName,u=s,c=f(t);o&&!u&&(o=o._parentComponent);)u=o.constructor===t.nodeName;return o&&u&&(!r||o._component)?(N(o,c,3,n,r),e=o.base):(a&&!s&&(P(a),e=i=null),o=x(t.nodeName,c,n),e&&!o.nextBase&&(o.nextBase=e,i=null),N(o,c,1,n,r),e=o.base,i&&e!==i&&(i._component=null,S(i,!1))),e}function P(e){R.beforeUnmount&&R.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?P(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,d(t),O(e),w(t)),e.__ref&&e.__ref(null)}function E(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function T(e,t,n){return g(n,e,{},!1,t,!1)}Object.defineProperty(t,"__esModule",{value:!0});var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R={},I=[],L=[],D="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,F=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[],B=[],Y=0,H=!1,q=!1,z={};a(E.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=a({},n)),a(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),s(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),j(this,2)},render:function(){}});var W={h:o,createElement:o,cloneElement:i,Component:E,render:T,rerender:u,options:R};t.h=o,t.createElement=o,t.cloneElement=i,t.Component=E,t.render=T,t.rerender=u,t.options=R,t.default=W},function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}function o(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function a(e,t){return t.encode?t.strict?u(e):encodeURIComponent(e):e}function i(e){return Array.isArray(e)?e.sort():"object"===(void 0===e?"undefined":s(e))?i(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(6),c=n(7),l=n(8);t.extract=function(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)},t.parse=function(e,t){t=c({arrayFormat:"none"},t);var n=o(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:l(a),n(l(o),a,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"===(void 0===n?"undefined":s(n))&&!Array.isArray(n)?e[t]=i(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){t=c({encode:!0,strict:!0,arrayFormat:"none"},t);var n=r(t);return e?Object.keys(e).sort().map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(e){void 0!==e&&i.push(n(r,e,i.length))}),i.join("&")}return a(r,t)+"="+a(o,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";n(3),n(4),n(5),n(9),n(12),n(20),n(33),n(38),n(39)},function(e,t,n){"use strict";var r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,u){"object"===i(t)&&void 0!==e?u(n(0)):(o=[n(0)],r=u,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a))}(0,function(e){function t(e){return{type:e.constructor,key:e.key,ref:null,props:e.props}}function n(e){var t=e.nodeType===Node.ELEMENT_NODE?Array.from(e.childNodes):[],n=e.nodeType===Node.TEXT_NODE;return{_currentElement:n?e.textContent:{type:e.nodeName.toLowerCase(),props:e[f]},_renderedChildren:t.map(function(e){return a(e._component?e._component:e)}),_stringText:n?e.textContent:null,_inDevTools:!1,node:e}}function r(e){return"function"==typeof e.type?e.type.displayName||e.type.name:e.type}function o(e){var n=t(e),o=e.base,i={getName:function(){return r(n)},_currentElement:t(e),props:e.props,state:e.state,forceUpdate:e.forceUpdate&&e.forceUpdate.bind(e),setState:e.setState&&e.setState.bind(e),node:o};return i._instance=e,e._component?i._renderedComponent=a(e._component):i._renderedComponent=a(o),i}function a(e){var t=e instanceof Node?n(e):o(e);if(p.has(e)){var r=p.get(e);return Object.assign(r,t),r}return p.set(e,t),t}function i(e){return"."+Object.keys(e).length}function s(e,t){Array.from(e.childNodes).forEach(function(e){e._component?t[i(t)]=a(e._component):s(e,t)})}function u(){var e={getNodeFromInstance:function(e){return e.node},getClosestInstanceFromNode:function(e){for(;e&&!e._component;)e=e.parentNode;return e?a(e._component):null}},t={};s(document.body,t);var n={_instancesByReactRootID:t,_renderNewRootComponent:function(){}},r={mountComponent:function(){},performUpdateIfNecessary:function(){},receiveComponent:function(){},unmountComponent:function(){}};return{componentAdded:function(e){var o=a(e);c(e)&&(o._rootID=i(t),t[o._rootID]=o,n._renderNewRootComponent(o)),l(o,function(e){e._inDevTools=!0,r.mountComponent(e)}),r.mountComponent(o)},componentUpdated:function(e){var t=[];l(p.get(e),function(e){t.push(e)});var n=a(e);r.receiveComponent(n),l(n,function(e){e._inDevTools?r.receiveComponent(e):(e._inDevTools=!0,r.mountComponent(e))}),t.forEach(function(e){document.body.contains(e.node)||(p.delete(e.node),r.unmountComponent(e))})},componentRemoved:function(e){var n=a(e);l(function(e){p.delete(e.node),r.unmountComponent(e)}),r.unmountComponent(n),p.delete(e),n._rootID&&delete t[n._rootID]},ComponentTree:e,Mount:n,Reconciler:r}}function c(e){return!e._parentComponent&&!e.__u&&(!e.base.parentElement||!e.base.parentElement[f])}function l(e,t){e._renderedComponent?e._renderedComponent._component||(t(e._renderedComponent),l(e._renderedComponent,t)):e._renderedChildren&&e._renderedChildren.forEach(function(e){t(e),e._component||l(e,t)})}var f="__preactattr_",p="function"==typeof Map&&new Map;!function(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=u(),n=e.options.afterMount;e.options.afterMount=function(e){t.componentAdded(e),n&&n(e)};var r=e.options.afterUpdate;e.options.afterUpdate=function(e){t.componentUpdated(e),r&&r(e)};var o=e.options.beforeUnmount;e.options.beforeUnmount=function(e){t.componentRemoved(e),o&&o(e)},__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(t)}}()})},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){window.budgetPortal={stringQueries:o.default.parse(location.search)||{}}}()},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)a.call(n,l)&&(u[l]=n[l]);if(o){s=o(n);for(var f=0;f<s.length;f++)i.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],r(n),r(o))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(s),n=1;n<t.length;n++)e=r(t,n).join(""),t=e.match(s);return e}}function a(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=u.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=u.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),i=0;i<a.length;i++){var s=a[i];e=e.replace(new RegExp(s,"g"),t[s])}return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=new RegExp("%[a-f0-9]{2}","gi"),u=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+(void 0===e?"undefined":i(e))+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return a(e)}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(){var e=document.getElementsByClassName("YearSelect"),t=[].concat(r(e)),n=window.budgetPortal.stringQueries.search;t.forEach(function(t,r){var a=JSON.parse(e[r].getAttribute("data-json")).data;(0,o.render)((0,o.h)(i.default,{jsonData:a,search:n}),e[r])})}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=n(11),l=function(e){return e&&e.__esModule?e:{default:e}}(c),f=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.updateItem=n.updateItem.bind(n),n}return i(t,e),s(t,[{key:"updateItem",value:function(e,t){return this.setState(r({},e,t))}},{key:"render",value:function(){return(0,u.h)(l.default,{jsonData:this.props.jsonData,search:this.props.search,open:this.state.open,updateItem:this.updateItem})}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function r(e){var t=e.jsonData,n=e.open,r=e.updateItem,a=e.search,i=t.map(function(e){var t="link"===e[2]?"a":"span",i=function(){return r("open",!n)},s=a?e[1]+"/?search="+a:e[1];return(0,o.h)("li",{className:"YearSelect-item"+("active"===e[2]?" is-active":""),onClick:i},(0,o.h)(t,{href:"active"===e[2]?null:s,className:"YearSelect-link"},e[0]))});return(0,o.h)("div",{className:"YearSelect-wrap"},(0,o.h)("h2",{className:"YearSelect-title"},"Show data for a financial year"),(0,o.h)("div",{className:"YearSelect-content"},(0,o.h)("ul",{className:"YearSelect-bar"+(n?" is-open":"")},i)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=r(i),u=n(13),c=r(u);t.default=function(){var e=document.getElementsByClassName("Search"),t=[].concat(o(e)),n=s.default.parse(location.search)||{},r=n.search;t.length>0&&t.forEach(function(e){var t=e.getAttribute("data-year");(0,a.render)((0,a.h)(c.default,{selectedYear:t,search:r}),e)})}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=n(14),l=function(e){return e&&e.__esModule?e:{default:e}}(c),f=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={keywords:n.props.search||"",results:[],focus:null,loading:null,timeoutId:null,focusTimeout:null,count:null},n.eventHandlers={updateItem:n.updateItem.bind(n),initRequest:n.initRequest.bind(n),setFocus:n.setFocus.bind(n)},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.search&&this.initRequest(this.state.keywords)}},{key:"setFocus",value:function(e){var t=this;if(!1===e&&null===this.state.focusTimeout){var n=setTimeout(function(){t.updateItem("focus",!1),t.updateItem("focusTimeout",null)},500);this.setState({focusTimeout:n})}return!0===e?(null!==this.state.focusTimeout&&clearInterval(this.state.focusTimeout),this.updateItem("focus",!0)):null}},{key:"updateItem",value:function(e,t){return this.setState(r({},e,t))}},{key:"sendRequest",value:function(e){var t=this;return new Promise(function(n,r){fetch(e).then(function(e){e.ok||r(e),e.json().then(function(e){t.setState({count:e.result.count}),n(e.result.results)}).catch(function(e){return r(e)})}).catch(function(e){return r(e)})}).then(function(e){t.setState({timeoutId:null}),t.setState({results:e}),t.setState({loading:!1})}).catch(function(e){return t.setState({loading:!1}),new Error(e)})}},{key:"initRequest",value:function(e){var t=this;if(this.setState({count:null}),this.setState({loading:!0}),this.setState({keywords:e}),this.state.keywords.length>3){this.state.timeoutId&&clearTimeout(this.state.timeoutId);var n="https://treasurydata.openup.org.za/api/3/action/package_search?q="+e+"&start=0&rows=4&fq=vocab_financial_years:"+this.props.selectedYear,r=function(){return t.sendRequest(n)},o=setTimeout(r,1e3);this.setState({timeoutId:o})}}},{key:"render",value:function(){return(0,u.h)(l.default,{state:this.state,eventHandlers:this.eventHandlers,selectedYear:this.props.selectedYear})}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.state,n=e.eventHandlers,r=e.selectedYear,o=t.loading,i=t.focus,u=t.keywords,l=t.results,f=t.count;return(0,a.h)("div",{className:"Search-wrap "+(i?" is-focused":"")},(0,a.h)(s.default,{eventHandlers:n,keywords:u,selectedYear:r}),(0,a.h)(c.default,{loading:o,results:l,focus:i,keywords:u,selectedYear:r,count:f}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(0),i=n(15),s=r(i),u=n(17),c=r(u)},function(e,t,n){"use strict";function r(e){var t=e.eventHandlers,n=e.keywords,r=e.selectedYear,a=t.initRequest,s=t.setFocus,u=function(e){return a(e.target.value)},c=function(){return s(!0)},l=function(){return s(!1)},f="/"+r+"/search-result";return(0,o.h)("form",{className:"Search-form",action:f,method:"GET"},(0,o.h)("input",{name:"search",className:"Search-keywords",placeholder:"Find departments",value:n,onInput:u,onFocus:c,onBlur:l,autoComplete:"off"}),(0,o.h)("div",{className:"Search-action"},(0,o.h)("button",{className:"Search-button",type:"submit"},(0,o.h)(i.default,null))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(16),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(){return(0,o.h)("svg",{className:"Search-icon",width:"18",height:"18",version:"1.2",baseProfile:"tiny",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99.9 100"},(0,o.h)("title",null,"Search"),(0,o.h)("path",{d:"M97.2 85.4L75.5 63.8l-.4-.3C79.5 57 82 49.3 82 41c0-22.6-18.3-41-41-41S0 18.3 0 41c0 22.6 18.3 41 41 41 8.3 0 16-2.5 22.5-6.7l.3.4 21.6 21.6c3.3 3.3 8.5 3.3 11.8 0 3.2-3.4 3.2-8.6 0-12zM41 67.7c-14.8 0-26.8-12-26.8-26.8 0-15 12-27 26.8-27s26.8 12 26.8 27c0 14.7-12 26.7-26.8 26.7z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){var t=e.loading,n=e.results,r=e.focus,a=e.keywords,s=e.selectedYear,u=e.count;return(0,o.h)("div",{className:"Search-results"+(a.length>3&&r?" is-open":"")},null===t?null:(0,o.h)(i.default,{results:n,loading:t,selectedYear:s,count:u}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){var t=e.results,n=e.loading,r=e.selectedYear,a=e.count;return(0,o.h)("div",null,(0,o.h)("span",{className:"Search-title"},"Suggested Departments",a?" (Showing 4 of "+a+")":""),n?(0,o.h)("ul",{className:"Search-list"},(0,o.h)(i.default,null)):function(){return t.length<1?(0,o.h)("ul",{className:"Search-list"},(0,o.h)("li",{className:"Search-error"},"No results found")):(0,o.h)("ul",{className:"Search-list"},t.map(function(e){var t=e.extras.findIndex(function(e){return"geographic_region_slug"===e.key}),n=e.extras.findIndex(function(e){return"department_name_slug"===e.key}),a=e.extras[t].value,i=e.extras[n].value,s=e.province[0]||"National";return(0,o.h)("li",null,(0,o.h)("a",{className:"Search-link",href:"/"+r+"/provincial/"+a+"/departments/"+i},s," Department: ",e.extras[0].value))}))}())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(19),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(){return(0,o.h)("div",{className:"Search-loading"},"Loading...")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=n(21),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){var e=document.getElementsByClassName("DeptSearch"),t=[].concat(r(e)),n=window.budgetPortal.stringQueries.spheres;t.length>0&&t.forEach(function(e){var t=JSON.parse(e.getAttribute("data-national-json")).data,i=JSON.parse(e.getAttribute("data-provincial-json")).data,u=[o({},t,{name:"National"})].concat(r(i));(0,a.render)((0,a.h)(s.default,{jsonData:u,spheres:n}),e.parentNode,e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=n(22),p=r(f),d=n(24),h=r(d),v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={keywords:"",province:null,spheres:n.props.spheres||null,open:null,results:n.props.jsonData},n.eventHandlers={updateFilter:n.updateFilter.bind(n),filterResults:n.filterResults.bind(n)},n}return s(t,e),c(t,[{key:"updateItem",value:function(e,t,n){return n?this.setState(o({},n,u({},this.state[n],o({},e,t)))):this.setState(o({},e,t))}},{key:"updateFilter",value:function(e,t){return this.state.open===e?this.setState({open:null}):this.setState({open:e}),this.setState(o({},e,t))}},{key:"filterResults",value:function(e){if(this.updateItem("keywords",e),e.length>2){var t={shouldSort:!0,threshold:.3,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["name"]},n=this.props.jsonData,r=n.map(function(n){var r=new p.default(n.departments,t);return u({},n,{departments:r.search(e)})});return this.setState({results:r})}return this.setState({results:this.props.jsonData})}},{key:"render",value:function(){return(0,l.h)(h.default,{state:this.state,eventHandlers:this.eventHandlers})}}]),t}(l.Component);t.default=v},function(e,t,n){"use strict";(function(e){var n,r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * Fuse.js v3.2.0 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
!function(i,s){"object"===a(t)&&"object"===a(e)?e.exports=s():(r=[],n=s,void 0!==(o="function"==typeof n?n.apply(t,r):n)&&(e.exports=o))}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),i=n(7),s=n(4),u=function(){function e(t,n){var o=n.location,a=void 0===o?0:o,i=n.distance,u=void 0===i?100:i,c=n.threshold,l=void 0===c?.6:c,f=n.maxPatternLength,p=void 0===f?32:f,d=n.isCaseSensitive,h=void 0!==d&&d,v=n.tokenSeparator,m=void 0===v?/ +/g:v,y=n.findAllMatches,g=void 0!==y&&y,_=n.minMatchCharLength,b=void 0===_?1:_;r(this,e),this.options={location:a,distance:u,threshold:l,maxPatternLength:p,isCaseSensitive:h,tokenSeparator:m,findAllMatches:g,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=p&&(this.patternAlphabet=s(this.pattern))}return o(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return a(e,this.pattern,r);var o=this.options,s=o.location,u=o.distance,c=o.threshold,l=o.findAllMatches,f=o.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:u,threshold:c,findAllMatches:l,minMatchCharLength:f})}}]),e}();e.exports=u},function(e,t,n){var r=n(0),o=function e(t,n,o){if(n){var a=n.indexOf("."),i=n,s=null;-1!==a&&(i=n.slice(0,a),s=n.slice(a+1));var u=t[i];if(null!==u&&void 0!==u)if(s||"string"!=typeof u&&"number"!=typeof u)if(r(u))for(var c=0,l=u.length;c<l;c+=1)e(u[c],s,o);else s&&e(u,s,o);else o.push(u.toString())}else o.push(t);return o};e.exports=function(e,t){return o(e,t,[])}},function(e,t,n){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,a=0,i=e.length;a<i;a+=1){var s=e[a];s&&-1===r?r=a:s||-1===r||(o=a-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}},function(e,t,n){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(r,"\\$&").replace(n,"|")),a=e.match(o),i=!!a,s=[];if(i)for(var u=0,c=a.length;u<c;u+=1){var l=a[u];s.push([e.indexOf(l),l.length-1])}return{score:i?.5:1,isMatch:i,matchedIndices:s}}},function(e,t,n){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,a=void 0===o?0:o,i=t.expectedLocation,s=void 0===i?0:i,u=t.distance,c=void 0===u?100:u,l=r/e.length,f=Math.abs(s-a);return c?l+f/c:f?1:l}},function(e,t,n){var r=n(6),o=n(3);e.exports=function(e,t,n,a){for(var i=a.location,s=void 0===i?0:i,u=a.distance,c=void 0===u?100:u,l=a.threshold,f=void 0===l?.6:l,p=a.findAllMatches,d=void 0!==p&&p,h=a.minMatchCharLength,v=void 0===h?1:h,m=s,y=e.length,g=f,_=e.indexOf(t,m),b=t.length,S=[],w=0;w<y;w+=1)S[w]=0;if(-1!==_){var k=r(t,{errors:0,currentLocation:_,expectedLocation:m,distance:c});if(g=Math.min(k,g),-1!==(_=e.lastIndexOf(t,m+b))){var O=r(t,{errors:0,currentLocation:_,expectedLocation:m,distance:c});g=Math.min(O,g)}}_=-1;for(var x=[],C=1,N=b+y,j=1<<b-1,M=0;M<b;M+=1){for(var P=0,E=N;P<E;){r(t,{errors:M,currentLocation:m+E,expectedLocation:m,distance:c})<=g?P=E:N=E,E=Math.floor((N-P)/2+P)}N=E;var T=Math.max(1,m-E+1),A=d?y:Math.min(m+E,y)+b,R=Array(A+2);R[A+1]=(1<<M)-1;for(var I=A;I>=T;I-=1){var L=I-1,D=n[e.charAt(L)];if(D&&(S[L]=1),R[I]=(R[I+1]<<1|1)&D,0!==M&&(R[I]|=(x[I+1]|x[I])<<1|1|x[I+1]),R[I]&j&&(C=r(t,{errors:M,currentLocation:L,expectedLocation:m,distance:c}))<=g){if(g=C,(_=L)<=m)break;T=Math.max(1,2*m-_)}}if(r(t,{errors:M+1,currentLocation:m,expectedLocation:m,distance:c})>g)break;x=R}return{isMatch:_>=0,score:0===C?.001:C,matchedIndices:o(S,v)}}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=n(2),s=n(0),u=function(){function e(t,n){var o=n.location,a=void 0===o?0:o,s=n.distance,u=void 0===s?100:s,c=n.threshold,l=void 0===c?.6:c,f=n.maxPatternLength,p=void 0===f?32:f,d=n.caseSensitive,h=void 0!==d&&d,v=n.tokenSeparator,m=void 0===v?/ +/g:v,y=n.findAllMatches,g=void 0!==y&&y,_=n.minMatchCharLength,b=void 0===_?1:_,S=n.id,w=void 0===S?null:S,k=n.keys,O=void 0===k?[]:k,x=n.shouldSort,C=void 0===x||x,N=n.getFn,j=void 0===N?i:N,M=n.sortFn,P=void 0===M?function(e,t){return e.score-t.score}:M,E=n.tokenize,T=void 0!==E&&E,A=n.matchAllTokens,R=void 0!==A&&A,I=n.includeMatches,L=void 0!==I&&I,D=n.includeScore,F=void 0!==D&&D,U=n.verbose,B=void 0!==U&&U;r(this,e),this.options={location:a,distance:u,threshold:l,maxPatternLength:p,isCaseSensitive:h,tokenSeparator:m,findAllMatches:g,minMatchCharLength:b,id:w,keys:O,includeMatches:L,includeScore:F,shouldSort:C,getFn:j,sortFn:P,verbose:B,tokenize:T,matchAllTokens:R},this.setCollection(t)}return o(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),n=t.tokenSearchers,r=t.fullSearcher,o=this._search(n,r),a=o.weights,i=o.results;return this._computeScore(a,i),this.options.shouldSort&&this._sort(i),this._format(i)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new a(n[r],this.options));return{tokenSearchers:t,fullSearcher:new a(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=this.list,r={},o=[];if("string"==typeof n[0]){for(var a=0,i=n.length;a<i;a+=1)this._analyze({key:"",value:n[a],record:a,index:a},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},u=0,c=n.length;u<c;u+=1)for(var l=n[u],f=0,p=this.options.keys.length;f<p;f+=1){var d=this.options.keys[f];if("string"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error("Key weight has to be > 0 and <= 1");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:u},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:"_analyze",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,a=e.value,i=e.record,u=e.index,c=t.tokenSearchers,l=void 0===c?[]:c,f=t.fullSearcher,p=void 0===f?[]:f,d=t.resultMap,h=void 0===d?{}:d,v=t.results,m=void 0===v?[]:v;if(void 0!==a&&null!==a){var y=!1,g=-1,_=0;if("string"==typeof a){this._log("\nKey: "+(""===n?"-":n));var b=p.search(a);if(this._log('Full text: "'+a+'", score: '+b.score),this.options.tokenize){for(var S=a.split(this.options.tokenSeparator),w=[],k=0;k<l.length;k+=1){var O=l[k];this._log('\nPattern: "'+O.pattern+'"');for(var x=!1,C=0;C<S.length;C+=1){var N=S[C],j=O.search(N),M={};j.isMatch?(M[N]=j.score,y=!0,x=!0,w.push(j.score)):(M[N]=1,this.options.matchAllTokens||w.push(1)),this._log('Token: "'+N+'", score: '+M[N])}x&&(_+=1)}g=w[0];for(var P=w.length,E=1;E<P;E+=1)g+=w[E];g/=P,this._log("Token score average:",g)}var T=b.score;g>-1&&(T=(T+g)/2),this._log("Score average:",T);var A=!this.options.tokenize||!this.options.matchAllTokens||_>=l.length;if(this._log("\nCheck Matches: "+A),(y||b.isMatch)&&A){var R=h[u];R?R.output.push({key:n,arrayIndex:o,value:a,score:T,matchedIndices:b.matchedIndices}):(h[u]={item:i,output:[{key:n,arrayIndex:o,value:a,score:T,matchedIndices:b.matchedIndices}]},m.push(h[u]))}}else if(s(a))for(var I=0,L=a.length;I<L;I+=1)this._analyze({key:n,arrayIndex:I,value:a[I],record:i,index:u},{resultMap:h,results:m,tokenSearchers:l,fullSearcher:p})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,a=o.length,i=0,s=1,u=0;u<a;u+=1){var c=e?e[o[u].key].weight:1,l=1===c?o[u].score:o[u].score||.001,f=l*c;1!==c?s=Math.min(s,f):(o[u].nScore=f,i+=f)}t[n].score=1===s?i/a:s,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this._log("\n\nOutput:\n\n",JSON.stringify(e));var n=[];this.options.includeMatches&&n.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var a=n[r];if(0!==a.matchedIndices.length){var i={indices:a.matchedIndices,value:a.value};a.key&&(i.key=a.key),a.hasOwnProperty("arrayIndex")&&a.arrayIndex>-1&&(i.arrayIndex=a.arrayIndex),t.matches.push(i)}}}),this.options.includeScore&&n.push(function(e,t){t.score=e.score});for(var r=0,o=e.length;r<o;r+=1){var a=e[r];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),n.length){for(var i={item:a.item},s=0,u=n.length;s<u;s+=1)n[s](a,i);t.push(i)}else t.push(a.item)}return t}},{key:"_log",value:function(){if(this.options.verbose){var e;(e=console).log.apply(e,arguments)}}}]),e}();e.exports=u}])})}).call(t,n(23)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.state,n=e.eventHandlers;return(0,a.h)("div",{className:"DeptSearch-wrap"},(0,a.h)("h3",{className:"u-sReadOnly"},"Filters"),(0,a.h)("ul",{className:"DeptSearch-list"},(0,a.h)("li",null,(0,a.h)(s.default,{state:t,eventHandlers:n}))),(0,a.h)("h3",{className:"u-sReadOnly"},"Results"),(0,a.h)(c.default,{state:t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(0),i=n(25),s=r(i),u=n(32),c=r(u)},function(e,t,n){"use strict";function r(e){var t=e.state,n=e.eventHandlers,r=[{title:"All Provinces",value:null},{title:"Eastern Cape",value:"eastern-cape"},{title:"Free State",value:"free-state"},{title:"Gauteng",value:"gauteng"},{title:"KwaZulu-Natal",value:"kwazulu-natal"},{title:"Limpopo",value:"limpopo"},{title:"Mpumalanga",value:"mpumalanga"},{title:"North West",value:"north-west"},{title:"Northern Cape",value:"northern-cape"},{title:"Western Cape",value:"western-cape"}],a=[{title:"All Spheres",value:null},{title:"National",value:"national"},{title:"Provincial",value:"provincial"}],s=function(e){return n.filterResults(e.target.value)},u=n.updateFilter,c=(0,o.h)("div",{className:"DeptSearch-filterGroup"},(0,o.h)("span",{className:"DeptSearch-divider"},"in"),(0,o.h)(i.default,{update:u,items:r,filter:"province",state:t.province,open:t.open}));return(0,o.h)("div",{className:"DeptSearch-form"},(0,o.h)("input",{value:t.keywords,className:"DeptSearch-keywords",placeholder:"Find a department",onInput:s}),(0,o.h)("div",{className:"DeptSearch-filterGroup"},(0,o.h)("span",{className:"DeptSearch-divider"},"in"),(0,o.h)(i.default,{update:u,items:a,filter:"spheres",state:t.spheres,open:t.open})),"provincial"===t.spheres?c:null)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){var t=e.items,n=e.state,r=e.update,a=e.open,i=e.filter,s=t.map(function(e){var t=function(){return r(i,e.value)};return(0,o.h)("li",{className:"DeptSearch-item"+(e.value===n?" is-active":"")},(0,o.h)("label",{htmlFor:"filter-"+i+"-"+e.value,className:"DeptSearch-label"},(0,o.h)("input",{className:"DeptSearch-radio",type:"radio",value:e.value,name:"filter-"+i,id:"filter-"+i+"-"+e.value,onClick:t}),e.title))});return(0,o.h)("div",{className:"DeptSearch-selectWrap"},(0,o.h)("ul",{className:"DeptSearch-select"+(i===a?" is-open":"")},s))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(27),i=function(e){return e&&e.__esModule?e:{default:e}}(a);r.propTypes={items:i.default.arrayOf(i.default.shape({title:i.default.bool,value:i.default.string})).isRequired,state:i.default.shape({open:i.default.bool,value:i.default.string}).isRequired,action:i.default.func.isRequired,filter:i.default.string.isRequired}},function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;e.exports=n(28)()},function(e,t,n){"use strict";var r=n(29),o=n(30),a=n(31);e.exports=function(){function e(e,t,n,r,i,s){s!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r,a,i,s,u){if(o(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,s,u],f=0;c=new Error(t.replace(/%s/g,function(){return l[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(e){};e.exports=r},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){var t=e.state,n=t.results,r=t.province,a=t.spheres,i=n.map(function(e,t){return null!==r&&r!==e.slug||0===t&&"provincial"===a||t>0&&"national"===a?null:e.departments.length>0?(0,o.h)("li",{className:"DeptSearch-group"},(0,o.h)("h4",{className:"DeptSearch-title"},e.name," Departments"),(0,o.h)("ul",{className:"DeptSearch-results"},e.departments.map(function(e){return(0,o.h)("li",null,(0,o.h)("a",{className:"DeptSearch-link",href:e.url_path},e.name))}))):(0,o.h)("div",{className:"DeptSearch-group DeptSearch-group--blank"},(0,o.h)("div",{className:"DeptSearch-title"},e.name),(0,o.h)("div",{className:"DeptSearch-link"},"No Results Found"))});return(0,o.h)("div",{className:"DeptSearch-results"},i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(34),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(){var e=document.getElementsByClassName("SearchResult"),t=[].concat(r(e)),n=window.budgetPortal.stringQueries.search;t.length>0&&t.forEach(function(e){var t=e.getAttribute("data-year");(0,o.render)((0,o.h)(i.default,{selectedYear:t,search:n}),e)})}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=n(35),f=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={results:[],count:null,shown:5,province:{value:null,open:!1}},n.updateFilter=n.updateFilter.bind(n),n.changeShown=n.changeShown.bind(n),n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t="https://treasurydata.openup.org.za/api/3/action/package_search?q="+this.props.search+"&start=0&rows="+this.state.shown+"&fq=vocab_financial_years:"+this.props.selectedYear;new Promise(function(n,r){fetch(t).then(function(t){t.ok||r(t),t.json().then(function(t){e.setState({count:t.result.count}),n(t.result.results)}).catch(function(e){return r(e)})}).catch(function(e){return r(e)})}).then(function(t){return e.setState({results:t})}).catch(function(e){return new Error(e)})}},{key:"updateItem",value:function(e,t,n){return n?this.setState(r({},n,s({},this.state[n],r({},e,t)))):this.setState(r({},e,t))}},{key:"updateFilter",value:function(e,t){return this.state[e].open?this.setState(r({},e,s({},this.state[e],{value:t,open:!1}))):this.updateItem("open",!0,[e])}},{key:"changeShown",value:function(e){var t=this,n=e>this.state.count?this.state.count:e;this.setState({shown:n});var r="https://treasurydata.openup.org.za/api/3/action/package_search?q="+this.props.search+"&start=0&rows="+this.state.shown+"&fq=vocab_financial_years:"+this.props.selectedYear;new Promise(function(e,n){fetch(r).then(function(r){r.ok||n(r),r.json().then(function(n){t.setState({count:n.result.count}),e(n.result.results)}).catch(function(e){return n(e)})}).catch(function(e){return n(e)})}).then(function(e){return t.setState({results:e})}).catch(function(e){return new Error(e)})}},{key:"render",value:function(){return(0,c.h)(f.default,{state:this.state,count:this.state.count,search:this.props.search,selectedYear:this.props.selectedYear,updateFilter:this.updateFilter,shown:this.state.shown,changeShown:this.changeShown})}}]),t}(c.Component);t.default=p},function(e,t,n){"use strict";function r(e){var t=e.count,n=e.changeShown,r=e.state,a=e.search,s=e.selectedYear,u=e.updateFilter,c=e.shown,l=r.results,f=l.map(function(e){var t=e.extras.findIndex(function(e){return"geographic_region_slug"===e.key}),n=e.extras.findIndex(function(e){return"department_name_slug"===e.key}),a=e.extras[t].value,i=e.extras[n].value;return null===r.province.value||r.province.value===a?(0,o.h)("a",{href:"/"+s+"/provincial/"+a+"/departments/"+i,className:"SearchResult-link"},e.province[0]," Department: ",e.extras[0].value):null}),p=(0,o.h)("span",{className:"SearchResult-countWrap"},(0,o.h)("span",null,"Showing "),(0,o.h)("input",{className:"SearchResult-count",type:"number",max:t,value:c,onInput:function(e){return n(e.target.value)}}),(0,o.h)("span",null," of ",t));return(0,o.h)("div",{className:"SearchResult-wrap"},(0,o.h)("div",{className:"SearchResult-heading"},'Search result for "',a,'" in Departments'),(0,o.h)("div",{className:"SearchResult-formWrap"},(0,o.h)(i.default,{state:r,updateFilter:u})),(0,o.h)("div",{className:"SearchResult-group"},(0,o.h)("div",{className:"SearchResult-title"},"Suggested Departments",t?p:""),(0,o.h)("div",{className:"SearchResult-list"},f)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=n(36),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){var t=e.state,n=e.updateFilter,r=[{title:"All Provinces",value:null},{title:"Eastern Cape",value:"eastern-cape"},{title:"Free State",value:"free-state"},{title:"Gauteng",value:"gauteng"},{title:"KwaZulu-Natal",value:"kwazulu-natal"},{title:"Limpopo",value:"limpopo"},{title:"Mpumalanga",value:"mpumalanga"},{title:"North West",value:"north-west"},{title:"Northern Cape",value:"northern-cape"},{title:"Western Cape",value:"western-cape"}];return(0,a.h)("div",{className:"SearchResult-form"},(0,a.h)(s.default,o({items:r,updateFilter:n},{state:t.province})))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var a=n(0),i=n(37),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){var t=e.items,n=e.state,r=e.updateFilter,a=t.map(function(e){var t=function(){return r("province",e.value)};return(0,o.h)("li",{className:"SearchResult-item"+(e.value===n.value?" is-active":""),onClick:t},(0,o.h)("input",{className:"SearchResult-radio",type:"radio"}),(0,o.h)("label",{className:"SearchResult-label"},e.title))});return(0,o.h)("div",{className:"SearchResult-selectWrap"},(0,o.h)("ul",{className:"SearchResult-select"+(n.open?" is-open":"")},a))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.getElementsByClassName("Intro");[].concat(r(e)).forEach(function(t,n){var r=e[n].getElementsByClassName("js-alertTrigger")[0],o=e[n].getElementsByClassName("js-alert")[0],a=e[n].getElementsByClassName("js-close")[0],i=function(){o.classList.add("is-active")},s=function(){o.classList.remove("is-active")};r.addEventListener("click",i),a.addEventListener("click",s)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),i=n(41),s=r(i),u=n(42),c=r(u);t.default=function(){var e=function(e){var t=e.phrase,n=e.description;return'<span class="Tooltip">\n      <span class="Tooltip-phrase js-openTrigger">'+t+'</span>\n      <div class="Tooltip-boxWrap js-alert">\n        <div class="Tooltip-box">\n          <div class="Tooltip-content">\n            <div class="Tooltip-shadowBox">\n              <div class="Tooltip-title">'+(0,s.default)(t)+'</div>\n              <div class="Tooltip-text">'+n+'</div>\n              <span class="Tooltip-linkWrap js-closeTrigger">\n                <span>'+c.default+'</span>\n                <span class="Tooltip-link">Close</span>\n              </a>\n              <div class="Tooltip-triangleWrap">\n                <div class="Tooltip-triangle"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </span>'};return function(){var t=document.getElementsByClassName("js-tooltips");[].concat(o(t)).forEach(function(n,r){a.data.forEach(function(n){var a=n.phrase,i=n.description,s=t[r].innerHTML.replace(new RegExp(a,"gi"),e({phrase:a,description:i}));t[r].innerHTML=s,[].concat(o(t[r].getElementsByClassName("Tooltip"))).forEach(function(e){var t=e.getElementsByClassName("js-openTrigger")[0],n=e.getElementsByClassName("js-closeTrigger")[0],r=e.getElementsByClassName("js-alert")[0],o=function(){return r.classList.add("is-open")},a=function(){return r.classList.remove("is-open")};t.addEventListener("click",o),n.addEventListener("click",a)})})})}()}()},function(e,t){e.exports={data:[{phrase:"national revenue fund",description:"The consolidated account of the national government into which all taxes, fees and charges collected by SARS and departmental revenue must be paid."},{phrase:"allocated expenditure",description:"The part of the national budget that can be divided between the national, provincial and local spheres of government, after interest and the contingency reserve have been taken into account"}]}},function(e,t,n){"use strict";function r(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='<svg version="1.2" width="10" height="10" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M58.3 50.4L96.7 12c2.4-2.4 2.4-6.2 0-8.6C94.3 1 90.5 1 88 3.4L49.8 41.8 11.3 3.4C9 1 5 1 2.7 3.4.3 5.8.3 9.6 2.7 12L41 50.4 2.8 88.8C.3 91.2.3 95 2.7 97.4 4 98.6 5.5 99.2 7 99.2c1.6 0 3-.6 4.3-1.8L49.7 59 88 97.4c1.3 1.2 3 1.8 4.4 1.8 1.6 0 3-.6 4.3-1.8 2.4-2.4 2.4-6.2 0-8.6L58.3 50.4zm0 0"></path></svg>'}]);
//# sourceMappingURL=scripts.f662be51a777991660b0.js.map