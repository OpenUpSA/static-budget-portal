---
layout: page-shell
---
{% if page.sphere == "national" %}
  {% assign page_data = site.data[page.financial_year][page.sphere].departments[page.data_key] %}
{% else %}
  {% assign page_data = site.data[page.financial_year][page.sphere][page.geographic_region_slug].departments[page.data_key] %}
{% endif %}

{% if page_data.government.slug == 'south-africa' %}
  {% assign department_location = 'National' %}
{% else %}
  {% assign department_location = page_data.government.name %}
{% endif %}


<div class="Page-content Page-content--dynamicYears">
  <div class="Page-contentInner is-full">
    <div class="u-marginBottom25">
      <h1 class="Page-mainHeading u-textAlignCenter u-marginBottom0">{{ page_data.name }}</h1>
      <span class="Page-subHeading u-textAlignCenter"> {{ department_location }} Department Budget for {{ page.financial_year }}</span>
    </div>

    {%
      include components/department-budgets/IntroSection/index.html
      description=page_data.intro
      datasets=page_data.treasury_datasets
      location=department_location
    %}

    <div class="u-marginTop20">
      <div
        data-component="ProgrammesChart"
        id="programmes-chart"
        data-values="{{ page_data.programmes.programme_budgets | jsonify | escape }}"
        data-year="{{ page.financial_year }}"
        data-files="{{ page_data.treasury_datasets | jsonify | escape }}"
        data-dept="{{ page_data.name }}"
        data-location="{{ department_location }}"
        data-dataset="{{ page_data.programmes.dataset_detail_page }}"
      >
      </div>
    </div>

    {% if page_data.economic_classification_by_programme.programmes %}
      <div class="Section is-bevel u-marginTop20 u-padding30">
        <h3 class="Section-title">Economic classification of expenditure for each Programme</h3>
        <p>Each chart shows the economic classification of spending under that Programme. More detail is available in the dataset.</p>
        <div class="Grid has-threeColumn">
          {% for programme in page_data.economic_classification_by_programme.programmes %}
          <div class="BasicContent u-marginTop10">
            <div class="BasicContent-title is-small">{{ programme.name }}</div>
            <div 
              data-component="SmallMultiple"
              data-items="{{ programme.items | jsonify | escape }}"
            >
            </div>
          </div>
          {% endfor %}
        </div>

        <div class="u-marginTop25 u-marginLeft25">
          {%
            include components/universal/Download/index.html
            link="page_data.economic_classification_by_programme.programmes.dataset_detail_page"
            title="View this data"
          %}
        </div>

        {% assign pdfButton = "Download " | append: short_estimate | append: " as PDF" %}
        {% assign excelButton = "Download " | append: short_estimate | append: " as Excel" %}

        {% for item in page_data.treasury_datasets %}
          {% assign modifiedFormats = item[1].formats | sort: 'format' %}
            <div>
              {%
                include components/universal/Download/index.html
                link="{{ modifiedFormats[0].url }}"
                title=pdfButton
                icon="true"
              %}
            </div>
            <div>
              {%
                include components/universal/Download/index.html
                link="{{ modifiedFormats[1].url }}"
                title=excelButton
                icon="true"
              %}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="u-marginTop20">
      <div
        id="line-chart"
        data-component="ExpenditureChart"
        data-adjusted="{{ page_data.expenditure_over_time.expenditure.real | jsonify | escape }}"
        data-notAdjusted="{{ page_data.expenditure_over_time.expenditure.nominal | jsonify | escape }}"
        data-year="{{ page.financial_year }}"
        data-location="{{ department_location }}"
        data-files="{{ page_data.treasury_datasets | jsonify | escape }}"
        data-department="{{ page_data.name }}"
        data-cpi="{{ site.data.global_values.cpi_dataset_url }}"
        data-dataset="{{ page_data.expenditure_over_time.dataset_detail_page }}"
      >
      </div>
    </div>

    <div class="u-marginTop20">
      <div class="Grid has-leftSidebar">
        <div>
          {%
            include components/department-budgets/ContributedData/index.html
            datasets=page_data.contributed_datasets
          %}
        </div>
            
        <div>
          {% 
            include components/universal/Participate/index.html
            title="Timelines for this department and ways to participate"
            description="National Treasury, departments and commitees are busy with different things depending on the time of year:"
          %}

          <div class="Section u-marginTop20">
            <h2 class="Section-title">Discuss this budget with others</h2>
            <div data-enhance-component="Comments" data-url="https://vulekamali.gov.za{{ page.url }}">
              <div id="discourse-comments"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
