---
layout: page-shell
---
{% if page.sphere == "national" %}
  {% assign page_data = site.data[page.financial_year][page.sphere].departments[page.data_key] %}
{% else %}
  {% assign page_data = site.data[page.financial_year][page.sphere][page.geographic_region_slug].departments[page.data_key] %}
{% endif %}

{% if page_data.government.slug == 'south-africa' %}
  {% assign department_location = 'National' %}
{% else %}
  {% assign department_location = page_data.government.name %}
{% endif %}


{% if page_data.government.slug == 'south-africa' %}
  {% assign source_type = 'Estimates of National Expenditure' %}
{% else %}
  {% assign source_type = 'Estimates of Provincial Expenditure' %}
{% endif %}


<div class="Page-content Page-content--dynamicYears">
  <div class="Page-contentInner is-full">
    <div class="u-marginBottom25">
      <h1 class="Page-mainHeading u-textAlignCenter u-marginBottom0">{{ page_data.name }}</h1>
      <span class="Page-subHeading u-textAlignCenter"> {{ department_location }} Department Budget for {{ page.financial_year }}</span>
    </div>

    {%
      include components/department-budgets/IntroSection/index.html
      description=page_data.intro
      datasets=page_data.treasury_datasets
      location=department_location
    %}

    <div class="u-marginTop20">
      <div
        data-component="ProgrammesChart"
        id="programmes-chart"
        data-values="{{ page_data.programmes.programme_budgets | jsonify | escape }}"
        data-year="{{ page.financial_year }}"
        data-files="{{ page_data.treasury_datasets | jsonify | escape }}"
        data-dept="{{ page_data.name }}"
        data-sourceType="{{ source_type }}"
        data-dataset="{{ page_data.programmes.dataset_detail_page }}"
      >
      </div>
    </div>

    {% for item in page_data.treasury_datasets %}
      {% assign modified_formats = item[1].formats | sort: 'format' %}
      {% assign pdf = modified_formats[0].url %}
      {% assign excel = modified_formats[1].url %}
    {% endfor %}

    {% if page_data.subprogramme_by_programme %}
      <div class="u-marginTop20">
        {%
          include components/department-budgets/SmallMultiplesSection/index.html
          title="Budgeted spending by sub-programme for each programme"
          description="Each chart shows the budgeted spending by each sub-programme of that programme."
          charts_list=page_data.subprogramme_by_programme.programmes

          source_type=source_type
          year=page.financial_year
          dataset=page_data.subprogramme_by_programme.dataset_detail_page
          pdf=pdf
          excel=excel
        %}
      </div>
    {% endif %}

    <div class="u-marginTop20">
      {% if page_data.economic_classification_by_programme.programmes %}
        {%
          include components/department-budgets/SmallMultiplesSection/index.html
          title="Budgeted spending by Economic Classification for each programme"
          description="Each chart shows the budgeted spending by economic classification under that Programme."
          charts_list=page_data.economic_classification_by_programme.programmes

          source_type=source_type
          year=page.financial_year
          dataset=page_data.subprogramme_by_programme.dataset_detail_page
          pdf=pdf
          excel=excel
        %}
      {% endif %}
    </div>

    {% if page_data.programme_by_economic_classification.econ_classes %}
      <div class="u-marginTop20">
        {%
          include components/department-budgets/SmallMultiplesSection/index.html
          title="Budgeted spending by programme for Economic Classification items"
          description="Each chart shows the budgeted spending of each Programme under that Economic Classification."
          charts_list=page_data.programme_by_economic_classification.econ_classes

          source_type=source_type
          year=page.financial_year
          dataset=page_data.subprogramme_by_programme.dataset_detail_page
          pdf=pdf
          excel=excel
        %}
      </div>
    {% endif %}

    <div class="u-marginTop20">
      <div
        id="line-chart"
        data-component="ExpenditureChart"
        data-adjusted="{{ page_data.expenditure_over_time.expenditure.real | jsonify | escape }}"
        data-notAdjusted="{{ page_data.expenditure_over_time.expenditure.nominal | jsonify | escape }}"
        data-year="{{ page.financial_year }}"
        data-files="{{ page_data.treasury_datasets | jsonify | escape }}"
        data-department="{{ page_data.name }}"
        data-cpi="{{ site.data.global_values.cpi_dataset_url }}"
        data-sourceType="{{ source_type }}"
        data-dataset="{{ page_data.programmes.dataset_detail_page }}"
      >
      </div>
    </div>

    <div class="u-marginTop20">
      <div class="Grid has-leftSidebar">
        <div>
          {%
            include components/department-budgets/ContributedData/index.html
            datasets=page_data.contributed_datasets
          %}
        </div>

        <div>
          {%
            include components/universal/Participate/index.html
            title="Timelines for this department and ways to participate"
            description="National Treasury, departments and commitees are busy with different things depending on the time of year:"
          %}

          <div class="Section u-marginTop20">
            <h2 class="Section-title">Discuss this budget with others</h2>
            <div data-enhance-component="Comments" data-url="https://vulekamali.gov.za{{ page.url }}">
              <div id="discourse-comments"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
